app-id: io.qt.qtdesignstudio
runtime: org.kde.Sdk
runtime-version: '6.7'
base: io.qt.qtwebengine.BaseApp
base-version: '6.7'
sdk: org.kde.Sdk
command: qtdesignstudio
rename-icon: QtProject-qtdesignstudio
finish-args:
  - --share=ipc
  - --share=network
  - --socket=fallback-x11
  - --filesystem=host
  - --device=dri
  - --allow=devel
  - --env=QTWEBENGINEPROCESS_PATH=/app/bin/QtWebEngineProcess
  - --env=QML_IMPORT_PATH=/app/qml
  - --env=QT_QPA_PLATFORM=xcb 
modules:
  - name: qt6-qtquicktimeline
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
    sources:
      - type: archive
        url: https://download.qt.io/official_releases/qt/6.7/6.7.2/submodules/qtquicktimeline-everywhere-src-6.7.2.tar.xz
        md5: d9dcbb84a080372fef5bb9a8ec488aa3
        x-checker-data:
          type: anitya
          project-id: 7927
          version:
            - <:6.8.0
          url-template: https://download.qt.io/official_releases/qt/6.7/$version/submodules/qtquicktimeline-everywhere-src-$version.tar.xz
          stable-only: true
          stable-only: true
  - name: qt-creator
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
      - -DSHOW_BUILD_DATE=ON
      - -DWITH_ONLINE_DOCS=ON
      - -DBUILD_DEVELOPER_DOCS=ON
      - -DBUILD_DESIGNSTUDIO=ON
      - -Wno-dev
    sources:
      - type: git
        url: https://code.qt.io/qt-creator/qt-creator
        tag: qds/v4.5
        commit: 17e69ab9686df38ec02715c08e54b120865ca2e7
        x-checker-data:
          type: anitya
          project-id: 4136
          tag-template: v$version
          stable-only: true
      - type: patch
        path: 0001-Add-Design-Studio-for-Linux.patch
      - type: patch
        path:  0001-FSEngineImpl-fix-the-build-with-Qt-6.7.patch
      - type: patch
        path: 0001-LanguageClient-fix-compile-with-latest-Qt-dev.patch
  - name: qtquickdesigner-components
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
    sources:
      - type: git
        url: https://code.qt.io/qt-labs/qtquickdesigner-components
        tag: qds-dev-4.5
        commit: 39f8401bdb821aa6609fbb6baadd503f57aa82d1
